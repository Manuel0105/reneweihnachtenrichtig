<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ Weihnachts-√úberraschung f√ºr Rene</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Courier New', monospace;
            background: #1a1a1a;
            color: #333;
            overflow: hidden;
            transition: background 0.5s;
            user-select: none; /* Text markieren verhindern f√ºr bessere Spiel-Experience */
        }

        /* ------------------------------------------- */
        /* MOBILE BLOCK */
        /* ------------------------------------------- */
        #mobile-block {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; color: #ff0000; z-index: 100000;
            flex-direction: column; justify-content: center; align-items: center;
            text-align: center; padding: 20px;
        }

        /* ------------------------------------------- */
        /* FULLSCREEN OVERLAY */
        /* ------------------------------------------- */
        #fullscreen-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; color: #fff;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 20000; text-align: center; padding: 20px;
        }
        #fs-btn {
            margin-top: 30px; padding: 15px 30px; font-size: 1.5em;
            background: #27ae60; color: white; border: 2px solid #fff;
            cursor: pointer; border-radius: 5px; animation: pulse 2s infinite;
        }

        /* ------------------------------------------- */
        /* XMAS THEME */
        /* ------------------------------------------- */
        #xmas-container {
            display: none;
            max-width: 800px; margin: 60px auto; padding: 40px;
            background: #fff; border-radius: 15px;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
            text-align: center; position: relative; z-index: 10;
            border: 4px solid #c0392b;
            font-family: sans-serif;
        }
        body.xmas-bg {
            background: #2c3e50;
            background-image: radial-gradient(circle at 50% 50%, #2c3e50 0%, #000 100%);
        }
        .xmas-btn {
            background: #c0392b; color: white; font-size: 1.5em;
            padding: 15px 40px; border: none; border-radius: 50px;
            cursor: pointer; margin-top: 20px; box-shadow: 0 5px 0 #922b21;
        }

        /* ------------------------------------------- */
        /* SCAM MODE */
        /* ------------------------------------------- */
        #scam-container {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5000; overflow-y: auto; text-align: center;
            font-family: 'Comic Sans MS', cursive;
        }
        body.scam-mode {
            background: linear-gradient(45deg, #ff00ff, #00ffff, #ff00ff);
            background-size: 400% 400%; animation: gradientShift 2s ease infinite;
        }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .scam-box {
            background: yellow; border: 5px solid red;
            max-width: 700px; margin: 50px auto; padding: 20px;
            transform: rotate(-1deg);
        }
        .scam-img {
            max-width: 100%; border: 5px solid #ff1493;
            box-shadow: 0 0 20px black; margin: 20px 0;
        }

        /* ------------------------------------------- */
        /* RICKROLL */
        /* ------------------------------------------- */
        #rickroll-section {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 6000;
        }
        #rickroll-video { width: 100%; height: 100%; object-fit: cover; }
        #moving-button {
            position: absolute; padding: 20px 40px;
            background: #ff00ff; color: white; font-weight: bold; font-size: 1.5em;
            border: 3px solid white; cursor: pointer; z-index: 6001;
            white-space: nowrap; transition: all 0.3s ease;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
        }

        /* ------------------------------------------- */
        /* VIRUS & GAMES SECTION */
        /* ------------------------------------------- */
        #virus-section {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; color: #ff0000; font-family: 'Courier New', monospace;
            z-index: 7000; padding: 20px; text-align: center;
        }
        .blink { animation: blinker 0.5s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
        .virus-red-bg { animation: redFlash 2s infinite; }
        @keyframes redFlash { 0%,100% {background:#000;} 50% {background:#300;} }

        #progress-container {
            width: 80%; height: 30px; background: #333; margin: 20px auto;
            border: 2px solid red;
        }
        #progress-bar { width: 0%; height: 100%; background: red; transition: width 0.1s; }

        /* --- GAME 1: HEI√üER DRAHT (Maze) --- */
        #wire-game-container {
            display: none;
            margin-top: 20px;
            border: 4px solid yellow;
            background: #111;
            padding: 10px;
            position: relative;
        }
        #wire-canvas {
            background: #000;
            border: 2px solid #333;
            cursor: crosshair;
            display: block;
            margin: 0 auto;
        }
        #wire-status { font-size: 1.5em; margin-bottom: 10px; color: yellow; }

        /* --- GAME 2: SHOOTER --- */
        #shooter-container {
            display: none;
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 8000;
            overflow: hidden;
            cursor: crosshair;
        }
        .target-bug {
            position: absolute;
            font-size: 3em;
            cursor: pointer;
            user-select: none;
            animation: wobble 0.5s infinite;
        }
        @keyframes wobble { 0%,100%{transform:rotate(-10deg);} 50%{transform:rotate(10deg);} }
        #score-board {
            position: absolute; top: 20px; right: 20px;
            font-size: 2em; color: lime; border: 2px solid lime; padding: 10px;
            background: black;
        }

        /* --- MASH BUTTON --- */
        #emergency-override {
            display: none; margin-top: 30px; border: 5px dashed yellow;
            padding: 20px; background: #220;
        }
        #mash-button {
            width: 180px; height: 180px; border-radius: 50%;
            background: radial-gradient(circle, #ff5555 0%, #990000 100%);
            border: 5px solid #fff; color: white; font-size: 1.3em;
            font-weight: bold; cursor: pointer; box-shadow: 0 0 20px red;
            transition: transform 0.05s;
        }
        #mash-button:active { transform: scale(0.95); }
        #force-bar-container { width: 50%; height: 15px; background: #333; margin: 10px auto; }
        #force-bar { width: 0%; height: 100%; background: yellow; }

        /* ------------------------------------------- */
        /* TERMINAL & END */
        /* ------------------------------------------- */
        #terminal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; color: #0f0; font-family: 'Courier New', monospace;
            padding: 20px; overflow-y: auto; z-index: 9000; text-align: left;
        }
        .terminal-line { margin: 5px 0; }
        #terminal-input {
            background: transparent; border: none; color: #0f0;
            font-family: 'Courier New', monospace; font-size: 1.2em;
            outline: none; width: 80%;
        }

        #final-message {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white; justify-content: center; align-items: center;
            flex-direction: column; text-align: center; z-index: 10000;
        }
    </style>
</head>
<body class="xmas-bg">

    <div id="mobile-block">
        <h1>‚ö†Ô∏è ZUGRIFF VERWEIGERT ‚ö†Ô∏è</h1>
        <p style="font-size: 1.5em;">Fehler: Mobiles Ger√§t erkannt.</p>
        <p style="margin-top: 20px;">Datenrettung nur √ºber PC m√∂glich.</p>
    </div>

    <div id="fullscreen-overlay">
        <h1>‚ö†Ô∏è SYSTEM-HINWEIS ‚ö†Ô∏è</h1>
        <p>Vollbildmodus erforderlich.</p>
        <button id="fs-btn" onclick="enterFullscreen()">STARTEN</button>
    </div>

    <div id="xmas-container">
        <h1 style="color: #c0392b; font-size: 3em;">üéÑ Frohe Weihnachten, Rene! üéÑ</h1>
        <div style="background: #27ae60; padding: 30px; border-radius: 10px; color: white; margin-top: 20px; border: 2px dashed gold;">
            <h2>Geschenk eingetroffen üéÖ</h2>
            <p style="font-size: 1.2em; margin: 20px 0;">Ein exklusiver Download steht bereit.</p>
            <button class="xmas-btn" onclick="showScamPage()">üéÅ JETZT AUSPACKEN</button>
        </div>
    </div>

    <div id="scam-container">
        <div style="background:red; color:yellow; font-size:2em; font-weight:bold;">
            <marquee>$$$ FREE DOWNLOAD $$$ NO VIRUS $$$ FREE MONEY $$$</marquee>
        </div>
        <div class="scam-box">
            <h1>CONGRATULATIONS!!!</h1>
            <p style="font-size: 1.5em;">YOU WON: <br>‚ú® DEMON SLAYER WAIFU COLLECTION ‚ú®</p>
            <img src="https://i.pinimg.com/originals/fd/7d/db/fd7ddb0ee34750e1e4ede5308a51b6c2.jpg" class="scam-img" alt="Scam" style="height: 300px; object-fit: contain;">
            <br>
            <button onclick="startRickroll()" style="background: #00ff00; color: blue; font-size: 2em; font-weight: bold; border: 5px solid blue; padding: 20px; cursor: pointer; box-shadow: 10px 10px 0 black;">
                ‚¨áÔ∏è DOWNLOAD (100% SAFE) ‚¨áÔ∏è
            </button>
        </div>
    </div>

    <div id="rickroll-section">
        <video id="rickroll-video" loop>
            <source src="rickroll.mp4" type="video/mp4">
        </video>
        <button id="moving-button" onclick="triggerVirusClick()">
            WEITER ZUM GESCHENK
        </button>
    </div>

    <div id="virus-section">
        <h1 style="font-size: 2.5em; margin-bottom: 20px;">‚ö†Ô∏è KRITISCHER FEHLER ‚ö†Ô∏è</h1>
        <div style="border: 4px solid red; padding: 15px; background: rgba(50,0,0,0.8);">
            <h2 class="blink">PC NICHT AUSSCHALTEN!</h2>
            <h3 style="color: #ff5555;">L√∂sche Steam-Bibliothek...</h3>
        </div>
        
        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
        <p id="virus-status">C:/Program Files/Steam/... wird formatiert</p>

        <div id="wire-game-container">
            <p id="wire-status">‚ö†Ô∏è K√úHLSYSTEM REPARIEREN ‚ö†Ô∏è<br><span style="font-size:0.6em">F√ºhre die Maus √ºber die graue Leitung zum blauen Ziel. Ber√ºhre NICHT ROT!</span></p>
            <canvas id="wire-canvas" width="600" height="300"></canvas>
        </div>

        <div id="emergency-override">
            <h2 style="color: yellow;">VIREN BESEITIGT!</h2>
            <p>MANUELLER NEUSTART ERFORDERLICH.</p>
            <button id="mash-button" onclick="mashButton()">NOT-AUS<br>H√ÑMMERN!</button>
            <div id="force-bar-container"><div id="force-bar"></div></div>
        </div>
    </div>

    <div id="shooter-container">
        <div id="score-board">VIREN: 0 / 100</div>
        <h1 style="color: red; text-align: center; margin-top: 50px; pointer-events: none;">‚ö†Ô∏è FIREWALL AKTIVIEREN ‚ö†Ô∏è<br>KLICKE DIE VIREN AN!</h1>
    </div>

    <div id="terminal">
        <div id="terminal-content"></div>
        <span id="prompt" style="display:none;">&gt; <input type="text" id="terminal-input" autofocus></span>
    </div>

    <div id="final-message">
        <h1>‚úÖ SYSTEM WIEDERHERGESTELLT</h1>
        <p style="font-size: 1.5em; margin: 20px;">Steam-Bibliothek gerettet.</p>
        <div style="border: 2px solid white; padding: 30px; margin-top: 30px; border-radius: 10px; background: rgba(255,255,255,0.1);">
            <h2>üéÅ DEIN GESCHENK üéÅ</h2>
            <p style="font-size: 2em; font-weight: bold; margin-top: 20px; animation: pulse 1s infinite;">
                üëá SCHAU UNTER DEINEN STUHL üëá
            </p>
        </div>
    </div>

    <script>
        // --- 0. MOBILE & INIT ---
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        window.onload = () => {
            if (isMobile()) {
                document.getElementById('mobile-block').style.display = 'flex';
                document.getElementById('fullscreen-overlay').style.display = 'none';
            }
        };

        function enterFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) elem.requestFullscreen().catch(e=>console.log(e));
            document.getElementById('fullscreen-overlay').style.display = 'none';
            document.getElementById('xmas-container').style.display = 'block';
        }

        // --- 1. FLOW CONTROL ---
        function showScamPage() {
            document.getElementById('xmas-container').style.display = 'none';
            document.body.classList.remove('xmas-bg');
            document.body.classList.add('scam-mode');
            document.getElementById('scam-container').style.display = 'block';
        }

        let isBtnClickable = false;
        let btnInterval;
        
        function startRickroll() {
            document.getElementById('scam-container').style.display = 'none';
            document.getElementById('rickroll-section').style.display = 'block';
            
            const v = document.getElementById('rickroll-video');
            v.muted = false; v.play().catch(()=>{v.muted=true;v.play()});

            setTimeout(() => { isBtnClickable = true; }, 10000);

            const btn = document.getElementById('moving-button');
            btnInterval = setInterval(() => {
                const maxX = window.innerWidth - 200, maxY = window.innerHeight - 80;
                btn.style.left = (Math.random()*maxX)+'px';
                btn.style.top = (Math.random()*maxY)+'px';
                btn.style.transform = 'none';
            }, 400);
        }

        function triggerVirusClick() {
            if (!isBtnClickable) return;
            clearInterval(btnInterval);
            document.getElementById('rickroll-video').pause();
            document.getElementById('rickroll-section').style.display = 'none';
            triggerVirus();
        }

        // --- 2. VIRUS LOGIC ---
        // Erweiterte Popup-Texte und Status-Nachrichten
        const popupTexts = [
            "L√ñSCHE DATEN...",
            "STEAM WIRD ENTFERNT...",
            "COUNTER-STRIKE 2 GEL√ñSCHT",
            "FORTNITE WIRD DEINSTALLIERT",
            "SKYRIM SAVES FORMATIERT",
            "ELDEN RING WIRD GEL√ñSCHT",
            "BALDUR'S GATE 3 ENTFERNT",
            "CYBERPUNK 2077 FORMATIERT",
            "WITCHER 3 WIRD GEL√ñSCHT",
            "RED DEAD REDEMPTION 2 ENTFERNT",
            "GTA V WIRD FORMATIERT",
            "MINECRAFT WELTEN GEL√ñSCHT",
            "FIFA KARRIERE ZERST√ñRT",
            "CALL OF DUTY MW3 ENTFERNT",
            "BATTLEFIELD 2042 GEL√ñSCHT",
            "APEX LEGENDS FORMATIERT",
            "VALORANT WIRD ENTFERNT",
            "LEAGUE OF LEGENDS GEL√ñSCHT",
            "DOTA 2 WIRD FORMATIERT",
            "OVERWATCH 2 ENTFERNT",
            "WARZONE 2.0 GEL√ñSCHT",
            "DESTINY 2 FORMATIERT",
            "STARFIELD WIRD GEL√ñSCHT",
            "HOGWARTS LEGACY ENTFERNT",
            "RESIDENT EVIL 4 FORMATIERT"
        ];

        const statusTexts = [
            "C:/Program Files/Steam/... wird formatiert",
            "C:/Users/Rene/AppData/... ZUGRIFF VERWEIGERT",
            "D:/Games/... WIRD √úBERSCHRIEBEN",
            "steamapps/common/... DATENVERLUST",
            "C:/Program Files (x86)/... FEHLER 0x8007045D",
            "Disk0/Partition2/... SEKTOR BESCH√ÑDIGT",
            "E:/SteamLibrary/... KORRUPTE DATEN ERKANNT"
        ];

        function triggerVirus() {
            document.body.classList.remove('scam-mode');
            const vs = document.getElementById('virus-section');
            vs.classList.add('virus-red-bg');
            vs.style.display = 'block';
            
            let statusIndex = 0;
            
            // Progress Bar mit mehr Varianz
            let w = 0;
            const bar = document.getElementById('progress-bar');
            const int = setInterval(() => {
                if (w >= 87) {
                    clearInterval(int);
                    document.getElementById('virus-status').textContent = "FEHLER! MANUELLES EINGREIFEN ERFORDERLICH!";
                    createPopup("K√úHLUNG DEFEKT", true);
                    startWireGame();
                } else {
                    w += 0.5; 
                    bar.style.width = w+'%';
                    
                    // Status-Text alle 5%
                    if(Math.floor(w) % 5 === 0 && w > 0) {
                        document.getElementById('virus-status').textContent = statusTexts[statusIndex % statusTexts.length];
                        statusIndex++;
                    }
                    
                    // Popups mit verschiedenen Texten
                    if(Math.floor(w) % 7 === 0 && w > 0) {
                        createPopup(popupTexts[Math.floor(Math.random() * popupTexts.length)]);
                    }
                }
            }, 80);
        }

        function createPopup(text, isCritical = false) {
            const p = document.createElement('div');
            const x = Math.random() * 80;
            const y = Math.random() * 80;
            const borderColor = isCritical ? 'yellow' : 'red';
            const bgColor = isCritical ? 'black' : 'white';
            const textColor = isCritical ? 'yellow' : 'black';
            
            p.style.cssText = `position:fixed; left:${x}%; top:${y}%; background:${bgColor}; border:2px solid ${borderColor}; padding:5px; z-index:7500; font-weight:bold; color:${textColor}; box-shadow: 0 0 10px ${borderColor};`;
            p.innerText = text;
            document.body.appendChild(p);
            setTimeout(()=>p.remove(), isCritical ? 3000 : 1500);
        }

        // --- 3. GAME 1: WIRE GAME (CANVAS) ---
        let canvas, ctx, isPlayingWire = false;
        let wireFailCount = 0;
        let wireGameStarted = false; // Muss erst am Start beginnen
        
        const wireFailMessages = [
            "‚ö° ZAP! NEUSTART! ‚ö°",
            "‚ö° KURZSCHLUSS! VERSUCH'S NOCHMAL! ‚ö°",
            "‚ö° √úBERSPANNUNG! VORSICHT! ‚ö°",
            "‚ö° STROMSCHLAG! NOCH EIN VERSUCH! ‚ö°",
            "‚ö° KONTAKT MIT LAVA! RESET! ‚ö°"
        ];
        
        function startWireGame() {
            document.getElementById('wire-game-container').style.display = 'block';
            canvas = document.getElementById('wire-canvas');
            ctx = canvas.getContext('2d');
            wireGameStarted = false;
            drawWireLevel();
            
            canvas.addEventListener('mousemove', handleWireMove);
            isPlayingWire = true;
        }

        function drawWireLevel() {
            // Hintergrund (Lava)
            ctx.fillStyle = "#500"; 
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Der Pfad (Sicher) - jetzt SCHMALER und KOMPLEXER
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.lineWidth = 28; // Schmaler gemacht (war 40)
            ctx.strokeStyle = "#888";

            ctx.beginPath();
            ctx.moveTo(30, 150);
            ctx.lineTo(80, 150);
            ctx.lineTo(80, 70);
            ctx.lineTo(180, 70);
            ctx.lineTo(180, 200);
            ctx.lineTo(130, 200);
            ctx.lineTo(130, 260);
            ctx.lineTo(300, 260);
            ctx.lineTo(300, 140);
            ctx.lineTo(370, 140);
            ctx.lineTo(370, 220);
            ctx.lineTo(470, 220);
            ctx.lineTo(470, 80);
            ctx.lineTo(550, 80);
            ctx.stroke();

            // Startzone
            ctx.fillStyle = "#0f0";
            ctx.beginPath(); ctx.arc(30, 150, 22, 0, Math.PI*2); ctx.fill();

            // Zielzone
            ctx.fillStyle = "#00f";
            ctx.beginPath(); ctx.arc(550, 80, 22, 0, Math.PI*2); ctx.fill();
        }

        function handleWireMove(e) {
            if (!isPlayingWire) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const pixel = ctx.getImageData(x, y, 1, 1).data;
            const isRed = pixel[0] > 50 && pixel[1] < 50 && pixel[2] < 50;
            const isGreen = pixel[1] > 200 && pixel[0] < 50 && pixel[2] < 50;
            const isBlue = pixel[2] > 200 && pixel[0] < 50 && pixel[1] < 50;

            // Muss erst am gr√ºnen Startpunkt beginnen
            if (!wireGameStarted) {
                if (isGreen) {
                    wireGameStarted = true;
                    document.getElementById('wire-status').innerText = "‚úì START! JETZT ZUM BLAUEN ZIEL!";
                    document.getElementById('wire-status').style.color = "lime";
                } else {
                    document.getElementById('wire-status').innerText = "‚ö†Ô∏è BEGINNE AM GR√úNEN STARTPUNKT! ‚ö†Ô∏è";
                    document.getElementById('wire-status').style.color = "yellow";
                }
                return;
            }

            if (isRed) {
                // FAIL - verschiedene Nachrichten
                wireFailCount++;
                wireGameStarted = false; // Muss neu starten!
                document.getElementById('wire-status').innerText = wireFailMessages[wireFailCount % wireFailMessages.length] + " VON VORNE!";
                document.getElementById('wire-status').style.color = "red";
                
                // Screen shake
                document.body.style.transform = "translate(5px, 5px)";
                setTimeout(()=>document.body.style.transform="none", 100);
            } else if (isBlue) {
                // BLUE = WIN
                isPlayingWire = false;
                canvas.removeEventListener('mousemove', handleWireMove);
                document.getElementById('wire-game-container').style.display = 'none';
                startShooterGame();
            } else {
                document.getElementById('wire-status').innerText = "‚ö†Ô∏è K√úHLSYSTEM REPARIEREN ‚ö†Ô∏è";
                document.getElementById('wire-status').style.color = "yellow";
            }
        }

        // --- 4. GAME 2: SHOOTER ---
        let score = 0;
        let shooterInterval;
        
        const shooterMessages = [
            "TREFFER! VIRUS ELIMINIERT!",
            "MALWARE ENTFERNT!",
            "BEDROHUNG BESEITIGT!",
            "KRITISCHER TREFFER!",
            "VIRUS NEUTRALISIERT!"
        ];
        
        function startShooterGame() {
            document.getElementById('shooter-container').style.display = 'block';
            shooterInterval = setInterval(spawnBug, 400);
        }

        function spawnBug() {
            if (score >= 100) return;
            
            const bug = document.createElement('div');
            bug.classList.add('target-bug');
            bug.innerText = ['ü¶†', 'üêõ', 'üï∑Ô∏è', 'ü¶Ç'][Math.floor(Math.random()*4)];
            
            const startY = Math.random() * (window.innerHeight - 100);
            bug.style.top = startY + 'px';
            bug.style.left = '-50px';
            
            let posX = -50;
            const speed = 3 + Math.random() * 5;
            
            const moveInt = setInterval(() => {
                posX += speed;
                bug.style.left = posX + 'px';
                if (posX > window.innerWidth) {
                    clearInterval(moveInt);
                    if(bug.parentNode) bug.remove();
                }
            }, 20);

            bug.onmousedown = () => {
                score += 10;
                document.getElementById('score-board').innerText = `VIREN: ${score} / 100`;
                bug.innerText = "üí•";
                clearInterval(moveInt);
                
                // Gelegentlich Erfolgsnachricht als Popup
                if (score % 30 === 0 && score < 100) {
                    createPopup(shooterMessages[Math.floor(Math.random() * shooterMessages.length)]);
                }
                
                setTimeout(() => bug.remove(), 200);
                
                if (score >= 100) {
                    endShooterGame();
                }
            };

            document.getElementById('shooter-container').appendChild(bug);
        }

        function endShooterGame() {
            clearInterval(shooterInterval);
            document.getElementById('shooter-container').innerHTML = ''; 
            document.getElementById('shooter-container').style.display = 'none';
            
            document.getElementById('emergency-override').style.display = 'block';
        }


        // --- 5. MASH BUTTON & TERMINAL ---
        let mashCount = 0;
        function mashButton() {
            mashCount++;
            document.getElementById('force-bar').style.width = (mashCount/15)*100 + '%';
            const btn = document.getElementById('mash-button');
            btn.style.transform = `translate(${(Math.random()-0.5)*10}px, ${(Math.random()-0.5)*10}px)`;

            if (mashCount >= 15) {
                startTerminal();
            }
        }
        setInterval(() => {
            if (mashCount > 0 && mashCount < 15) {
                mashCount -= 0.5;
                document.getElementById('force-bar').style.width = (mashCount/15)*100 + '%';
            }
        }, 200);

        const questions = [
            { q: "Wie gro√ü ist Sophia?", a: ["1,74", "174", "1.74"], h: "Metrisch." },
            { q: "Was ist Sophias Lieblings-Trash-TV-Serie?", a: ["temptation"], h: "Versuchung..." },
            { q: "Welche Haarfarbe hatte Sophia beim Kennenlernen?", a: ["lila", "violett", "purple"], h: "Nicht nat√ºrlich." }
        ];
        let qIdx = 0;
        const tContent = document.getElementById('terminal-content');
        const tInput = document.getElementById('terminal-input');

        // Erweiterte Terminal-Boot-Nachrichten
        const bootMessages = [
            "INITIALISIERE SYSTEMWIEDERHERSTELLUNG...",
            "LADE BIOS v2.45.3...",
            "PR√úFE HARDWARE-INTEGRIT√ÑT...",
            "CPU: OK | RAM: OK | GPU: OK",
            "DATEISYSTEM WIRD √úBERPR√úFT...",
            "SEKTOR 0-4096: INTAKT",
            "SEKTOR 4097-8192: REPARIERT",
            "NOTFALL-PARTITION GEFUNDEN",
            "STARTE DATENRETTUNGSMODUS...",
            "",
            "REBOOT SYSTEM...",
            "KERNEL LOADING... DONE",
            "MOUNTING FILESYSTEMS...",
            "DATENINTEGRIT√ÑT... OK.",
            "STEAM... GERETTET.",
            "SAVEGAMES... WIEDERHERGESTELLT.",
            "CLOUD-SYNC... AKTIV.",
            "",
            "SICHERHEITSPR√úFUNG AKTIVIERT...",
            "IDENTIT√ÑTSVERIFIKATION ERFORDERLICH.",
            ""
        ];

        async function startTerminal() {
            document.getElementById('virus-section').style.display = 'none';
            document.querySelectorAll('div[style*="z-index:7500"]').forEach(e=>e.remove());
            document.getElementById('terminal').style.display = 'block';
            
            // Zeige alle Boot-Nachrichten
            for (let msg of bootMessages) {
                await typeLine(msg);
            }
            
            askQ();
        }

        function typeLine(txt) {
            return new Promise(r => {
                const d = document.createElement('div');
                d.className = 'terminal-line'; tContent.appendChild(d);
                let i=0; const t = setInterval(()=>{
                    if(i<txt.length){d.textContent+=txt[i];i++}else{clearInterval(t);r()}
                },20);
            });
        }

        function askQ() {
            if (qIdx >= questions.length) {
                document.getElementById('terminal').style.display = 'none';
                document.getElementById('final-message').style.display = 'flex';
                return;
            }
            typeLine(`SICHERHEITSFRAGE ${qIdx+1}/3: ${questions[qIdx].q}`).then(()=>{
                document.getElementById('prompt').style.display='inline';
                tInput.value=''; tInput.focus();
            });
        }

        tInput.addEventListener('keypress', e => {
            if(e.key==='Enter'){
                const v = tInput.value.toLowerCase();
                const q = questions[qIdx];
                document.getElementById('prompt').style.display='none';
                typeLine(`> ${tInput.value}`);
                if(q.a.some(x=>v.includes(x))) {
                    typeLine("‚úì KORREKT. ZUGRIFF GEW√ÑHRT.").then(()=>{qIdx++;setTimeout(askQ,500)});
                } else {
                    typeLine(`‚úó FALSCH. HINWEIS: ${q.h}`).then(()=>setTimeout(askQ,1000));
                }
            }
        });
    </script>
</body>
</html>